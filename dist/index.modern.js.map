{"version":3,"file":"index.modern.js","sources":["../src/index.tsx"],"sourcesContent":["import * as React from 'react'\nimport { OptionsObject, SnackbarKey, SnackbarMessage, withSnackbar} from \"notistack\";\nimport { ReactText } from \"react\";\n\ninterface Props{\n  intervalMs: number,\n  getData: (url:string)=>Promise<any>\n}\n\nclass NetworkCheck extends React.Component<{\n  enqueueSnackbar: (message: SnackbarMessage, options?: OptionsObject) => SnackbarKey;\n  closeSnackbar: (key?: SnackbarKey) => void;\n  intervalMs: number,\n  getData: (url:string)=>Promise<any>\n},{}>{\n  constructor(props:any) {\n    super(props);\n    if (this.props.intervalMs) setInterval(this.checkNetwork, this.props.intervalMs);\n  }\n  isOfflineMessage:ReactText|null;\n  checkNetwork = ()=>{\n    this.props.getData('/me?fields=id').then(()=>{\n        if (this.isOfflineMessage) {\n          this.props.closeSnackbar(this.isOfflineMessage);\n          this.isOfflineMessage = null;\n          this.props.enqueueSnackbar(`You're back online`, {variant:'success'});\n        }\n      }).catch(()=>{\n        if (!this.isOfflineMessage) this.isOfflineMessage = this.props.enqueueSnackbar(`You're now offline`, {variant:'error', persist: true});\n      })\n  }\n  render(){\n    return null;\n  }\n}\n\nexport default withSnackbar(NetworkCheck) as any as React.ElementType<Props>;\n"],"names":["NetworkCheck","React","constructor","props","getData","then","isOfflineMessage","closeSnackbar","enqueueSnackbar","variant","catch","persist","intervalMs","setInterval","checkNetwork","render","withSnackbar"],"mappings":";;;AASA,MAAMA,YAAN,SAA2BC,SAA3B;AAMEC,EAAAA,YAAYC;AACV,UAAMA,KAAN;;AAIF,qBAAA,GAAe;AACb,WAAKA,KAAL,CAAWC,OAAX,CAAmB,eAAnB,EAAoCC,IAApC,CAAyC;AACrC,YAAI,KAAKC,gBAAT,EAA2B;AACzB,eAAKH,KAAL,CAAWI,aAAX,CAAyB,KAAKD,gBAA9B;AACA,eAAKA,gBAAL,GAAwB,IAAxB;AACA,eAAKH,KAAL,CAAWK,eAAX,qBAAA,EAAiD;AAACC,YAAAA,OAAO,EAAC;AAAT,WAAjD;AACD;AACF,OANH,EAMKC,KANL,CAMW;AACP,YAAI,CAAC,KAAKJ,gBAAV,EAA4B,KAAKA,gBAAL,GAAwB,KAAKH,KAAL,CAAWK,eAAX,qBAAA,EAAiD;AAACC,UAAAA,OAAO,EAAC,OAAT;AAAkBE,UAAAA,OAAO,EAAE;AAA3B,SAAjD,CAAxB;AAC7B,OARH;AASD,KAVD;;AAHE,QAAI,KAAKR,KAAL,CAAWS,UAAf,EAA2BC,WAAW,CAAC,KAAKC,YAAN,EAAoB,KAAKX,KAAL,CAAWS,UAA/B,CAAX;AAC5B;;AAaDG,EAAAA,MAAM;AACJ,WAAO,IAAP;AACD;;;;AAGH,YAAeC,YAAY,CAAChB,YAAD,CAA3B;;;;"}