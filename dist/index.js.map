{"version":3,"file":"index.js","sources":["../src/index.tsx"],"sourcesContent":["import * as React from 'react'\nimport { OptionsObject, SnackbarKey, SnackbarMessage, withSnackbar} from \"notistack\";\nimport { ReactText } from \"react\";\n\ninterface Props{\n  intervalMs: number,\n  getData: (url:string)=>Promise<any>\n}\n\nclass NetworkCheck extends React.Component<{\n  enqueueSnackbar: (message: SnackbarMessage, options?: OptionsObject) => SnackbarKey;\n  closeSnackbar: (key?: SnackbarKey) => void;\n  intervalMs: number,\n  getData: (url:string)=>Promise<any>\n},{}>{\n  constructor(props:any) {\n    super(props);\n    if (this.props.intervalMs) setInterval(this.checkNetwork, this.props.intervalMs);\n  }\n  isOfflineMessage:ReactText|null;\n  checkNetwork = ()=>{\n    this.props.getData('/me?fields=id').then(()=>{\n        if (this.isOfflineMessage) {\n          this.props.closeSnackbar(this.isOfflineMessage);\n          this.isOfflineMessage = null;\n          this.props.enqueueSnackbar(`You're back online`, {variant:'success'});\n        }\n      }).catch(()=>{\n        if (!this.isOfflineMessage) this.isOfflineMessage = this.props.enqueueSnackbar(`You're now offline`, {variant:'error', persist: true});\n      })\n  }\n  render(){\n    return null;\n  }\n}\n\nexport default withSnackbar(NetworkCheck) as any as React.ElementType<Props>;\n"],"names":["NetworkCheck","props","getData","then","isOfflineMessage","closeSnackbar","enqueueSnackbar","variant","persist","intervalMs","setInterval","checkNetwork","render","React","withSnackbar"],"mappings":";;;;;;;;;;;;;;;;;;;IASMA;;;AAMJ,wBAAYC,KAAZ;;;AACE,wCAAMA,KAAN;;AAIF,sBAAA,GAAe;AACb,YAAKA,KAAL,CAAWC,OAAX,CAAmB,eAAnB,EAAoCC,IAApC,CAAyC;AACrC,YAAI,MAAKC,gBAAT,EAA2B;AACzB,gBAAKH,KAAL,CAAWI,aAAX,CAAyB,MAAKD,gBAA9B;;AACA,gBAAKA,gBAAL,GAAwB,IAAxB;;AACA,gBAAKH,KAAL,CAAWK,eAAX,uBAAiD;AAACC,YAAAA,OAAO,EAAC;AAAT,WAAjD;AACD;AACF,OANH,WAMW;AACP,YAAI,CAAC,MAAKH,gBAAV,EAA4B,MAAKA,gBAAL,GAAwB,MAAKH,KAAL,CAAWK,eAAX,uBAAiD;AAACC,UAAAA,OAAO,EAAC,OAAT;AAAkBC,UAAAA,OAAO,EAAE;AAA3B,SAAjD,CAAxB;AAC7B,OARH;AASD,KAVD;;AAHE,QAAI,MAAKP,KAAL,CAAWQ,UAAf,EAA2BC,WAAW,CAAC,MAAKC,YAAN,EAAoB,MAAKV,KAAL,CAAWQ,UAA/B,CAAX;;AAC5B;;;;SAaDG,SAAA;AACE,WAAO,IAAP;AACD;;;EAxBwBC;;AA2B3B,YAAeC,sBAAY,CAACd,YAAD,CAA3B;;;;"}